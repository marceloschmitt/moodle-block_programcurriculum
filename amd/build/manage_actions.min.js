define(["core/notification","core/modal_delete_cancel","core/modal_events","core/str"],function(r,d,i,u){function e(){function n(e,t){c&&(e=c.elements.namedItem(e))&&(e.value=null==t?"":t)}document.querySelectorAll("a[data-confirm-message]").forEach(function(o){"1"!==o.dataset.confirmBound&&(o.dataset.confirmBound="1",o.addEventListener("click",function(e){e.preventDefault();var e=o.getAttribute("data-confirm-message")||"",t=o.getAttribute("data-confirm-name")||"";(t?u.get_strings([{key:"deletecurriculumtitle",component:"block_programcurriculum"},{key:"deletecurriculumbody",component:"block_programcurriculum",param:t}]).then(function(e){return d.create({title:e[0],body:e[1]}).then(function(e){function t(){window.location.href=o.href}var n=e.getRoot();return n.on(i.save,t),n.on(i.delete,t),e.show(),e})}):d.create({title:e,body:""}).then(function(e){function t(){window.location.href=o.href}var n=e.getRoot();return n.on(i.save,t),n.on(i.delete,t),e.show(),e})).catch(r.exception)}))});var o=document.querySelector('[data-open-curriculum-modal="1"]'),a=document.getElementById("programcurriculum-curriculum-modal-title"),c=document.getElementById("programcurriculum-curriculum-form"),e=document.querySelector('[data-action="add-curriculum"]');e&&!e.dataset.modalBound&&(e.dataset.modalBound="1",e.addEventListener("click",function(){a&&(a.textContent=a.dataset.addTitle||a.textContent),n("id",0),n("name",""),n("externalcode",""),n("description","")})),document.querySelectorAll('a[data-action="edit-curriculum"]').forEach(function(t){"1"!==t.dataset.modalBound&&(t.dataset.modalBound="1",t.addEventListener("click",function(e){e.preventDefault(),a&&(a.textContent=a.dataset.editTitle||a.textContent),n("id",t.dataset.editId||0),n("name",t.dataset.editName||""),n("externalcode",t.dataset.editCode||""),n("description",t.dataset.editDescription||""),o&&o.click()}))})}return{init:function(){e()}}});