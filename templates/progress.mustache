<div class="programcurriculum-progress">
    {{#hascurricula}}
        {{^showstudentlist}}
        <form method="get">
            <input type="hidden" name="courseid" value="{{courseid}}">
            <input type="hidden" name="userid" value="{{userid}}">
            <div class="mb-2">
                <a class="btn btn-secondary mb-2" href="{{{courseviewurl}}}">{{#str}}backtostudents, block_programcurriculum{{/str}}</a>
            </div>
            <label for="curriculumid">{{#str}}choosecurriculum, block_programcurriculum{{/str}}</label>
            <select name="curriculumid" id="curriculumid" onchange="this.form.submit()">
                {{#curricula}}
                    <option value="{{id}}" {{#selected}}selected{{/selected}}>{{name}}</option>
                {{/curricula}}
            </select>
        </form>
        {{/showstudentlist}}

        {{#showstudentlist}}
            {{#hasmappings}}
            <table class="generaltable">
                <thead>
                    <tr>
                        <th>{{#str}}externalcourse, block_programcurriculum{{/str}}</th>
                        <th>{{#str}}mappedcourse, block_programcurriculum{{/str}}</th>
                    </tr>
                </thead>
                <tbody>
                    {{#coursemappings}}
                    <tr>
                        <td>{{externalcoursename}}</td>
                        <td>{{moodlecoursename}}</td>
                    </tr>
                    {{/coursemappings}}
                </tbody>
            </table>
            {{/hasmappings}}
            {{^hasmappings}}
            <div class="alert alert-info">{{#str}}nomappings, block_programcurriculum{{/str}}</div>
            {{/hasmappings}}

            <h5 class="mt-3">{{#str}}listofstudents, block_programcurriculum{{/str}}</h5>
            {{#hasstudents}}
            <ul class="list-unstyled mt-2">
            {{#students}}
                <li class="py-1 border-bottom d-flex align-items-center justify-content-between">
                    <span>{{fullname}}</span>
                    <a class="btn btn-sm btn-outline-primary" href="{{viewurl}}">{{#str}}viewstudentprogress, block_programcurriculum{{/str}}</a>
                </li>
            {{/students}}
            </ul>
            {{/hasstudents}}
            {{^hasstudents}}
            <div class="alert alert-info mt-3">{{#str}}nostudents, block_programcurriculum{{/str}}</div>
            {{/hasstudents}}
        {{/showstudentlist}}

        {{#progress}}
            <div class="mt-3">
                <strong>{{#str}}progresspercent, block_programcurriculum{{/str}}:</strong> {{percent}}%
                ({{completed}}/{{total}})
            </div>

            <table class="generaltable mt-3">
                <thead>
                    <tr>
                        <th>{{#str}}mappedcourse, block_programcurriculum{{/str}}</th>
                        <th>{{#str}}completionstatus, block_programcurriculum{{/str}}</th>
                    </tr>
                </thead>
                <tbody>
                    {{#details}}
                        <tr>
                            <td>{{coursename}}</td>
                            <td>
                                {{#completed}}{{#str}}completed, block_programcurriculum{{/str}}{{/completed}}
                                {{^completed}}{{#str}}notcompleted, block_programcurriculum{{/str}}{{/completed}}
                            </td>
                        </tr>
                    {{/details}}
                </tbody>
            </table>
        {{/progress}}
    {{/hascurricula}}

    {{^hascurricula}}
        <div class="alert alert-info">{{#str}}nocurricula, block_programcurriculum{{/str}}</div>
    {{/hascurricula}}
</div>
